master:
  port: 50055

workers:
  # Test worker that will fail immediately to test circuit breaker
  - id: "test-managed"
    type: "managed"
    unit:
      managed:
        metadata:
          name: "Echo server"
        control:
          execution:
            executable_path: "..\\..\\..\\..\\hsu-example1-go\\cmd\\srv\\echogrpcsrv\\echogrpcsrv.exe"
            # Intentionally missing --port argument to cause immediate failure
            args: ["--port", "50051"]
          restart:
            policy: "on-failure"
            max_retries: 2        # Low retry limit for testing
            retry_delay: "3s"     # Short delay for testing
            backoff_rate: 2.0     # Exponential backoff
        health_check:
          type: "process"  
          run_options:
            enabled: true
            interval: "5s"        # Faster check for testing
            timeout: "2s"
            initial_delay: "1s"   # Quick initial check
            retries: 1            # Quick failure detection 
  - id: "test-circuit-breaker"
    type: "managed"
    unit:
      managed:
        metadata:
          name: "Circuit Breaker Test - Echo server without required args"
        control:
          execution:
            executable_path: "..\\..\\..\\..\\hsu-example1-go\\cmd\\srv\\echogrpcsrv\\echogrpcsrv.exe"
            # Intentionally missing --port argument to cause immediate failure
            args: []  
          restart:
            policy: "on-failure"
            max_retries: 2        # Low retry limit for testing
            retry_delay: "3s"     # Short delay for testing
            backoff_rate: 2.0     # Exponential backoff
        health_check:
          type: "process"  
          run_options:
            enabled: true
            interval: "5s"        # Faster check for testing
            timeout: "2s"
            initial_delay: "1s"   # Quick initial check
            retries: 1            # Quick failure detection 